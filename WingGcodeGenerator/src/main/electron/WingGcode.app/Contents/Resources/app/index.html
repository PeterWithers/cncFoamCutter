<!DOCTYPE html>
<!--
Copyright (C) 2018 Peter Withers
-->

<!--
 * @since Jan 15, 2018 20:45 PM (creation date)
 * @author <peter-gthb@bambooradical.com>
-->
<html>
    <head>
        <title>WingGcode</title>
        <script>
            window.addEventListener("message", function (event) {
                document.getElementById("gcodeArea").value = event.data;
            }, false);
            navigator.mediaDevices.getUserMedia({video: true}).then(function (stream) {
                document.getElementById('camera').src = URL.createObjectURL(stream);
            }).catch(function () {                
            });
        </script>
    </head>
    <body>
        <table>
            <tr>
                <td>
                    <iframe id="remoteFrame" style="width:50vw;height:100vh;" src="https://winggcode.bambooradical.com/LaserTestGcode"></iframe>
                </td>
                <td>
                    <video style="width:50vw;" id="camera" autoplay> </video>
                    <div id="porterror"></div>
                    <select id="portlist"></select>
                    <textarea style="width:50vw;" id="gcodeArea"></textarea><br/>
                    <button id="sendButton">Send GCODE</button><br/>
                    electron <script>document.write(process.versions.electron)</script>,
                    chromium <script>document.write(process.versions.chrome)</script>,
                    node <script>document.write(process.versions.node)</script>,
                    serialport <script>document.write(require('serialport/package').version)</script>
                </td>
            </tr>
        </table>
        <script>
            require('./serialconnector.js')
        </script>
    </body>
</html>
